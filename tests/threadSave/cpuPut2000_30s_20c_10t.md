-t10 -c20 -d30s -R2000 -s ./wrk/put.lua --latency http://localhost:8080
Running 30s test @ http://localhost:8080
  10 threads and 20 connections
  Thread calibration: mean lat.: 1.137ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.233ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 0.965ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.020ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.120ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.227ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.144ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 0.995ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 0.975ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 0.962ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.06ms  445.81us  11.40ms   66.94%
    Req/Sec   213.28     34.60   444.00     88.85%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.07ms
 75.000%    1.33ms
 90.000%    1.64ms
 99.000%    2.00ms
 99.900%    2.17ms
 99.990%   10.51ms
 99.999%   11.41ms
100.000%   11.41ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.108     0.000000            1         1.00
       0.472     0.100000         4015         1.11
       0.636     0.200000         8010         1.25
       0.812     0.300000        11996         1.43
       0.960     0.400000        15993         1.67
       1.071     0.500000        19990         2.00
       1.121     0.550000        21994         2.22
       1.169     0.600000        23992         2.50
       1.220     0.650000        26003         2.86
       1.270     0.700000        28024         3.33
       1.326     0.750000        29990         4.00
       1.358     0.775000        30999         4.44
       1.394     0.800000        31996         5.00
       1.440     0.825000        32996         5.71
       1.495     0.850000        33988         6.67
       1.562     0.875000        34988         8.00
       1.599     0.887500        35485         8.89
       1.636     0.900000        35984        10.00
       1.674     0.912500        36484        11.43
       1.714     0.925000        36992        13.33
       1.753     0.937500        37488        16.00
       1.774     0.943750        37733        17.78
       1.798     0.950000        37984        20.00
       1.821     0.956250        38240        22.86
       1.844     0.962500        38485        26.67
       1.870     0.968750        38739        32.00
       1.886     0.971875        38857        35.56
       1.902     0.975000        38989        40.00
       1.918     0.978125        39113        45.71
       1.935     0.981250        39232        53.33
       1.954     0.984375        39358        64.00
       1.966     0.985938        39420        71.11
       1.976     0.987500        39481        80.00
       1.990     0.989062        39545        91.43
       2.005     0.990625        39607       106.67
       2.019     0.992188        39668       128.00
       2.027     0.992969        39699       142.22
       2.036     0.993750        39731       160.00
       2.045     0.994531        39766       182.86
       2.055     0.995313        39795       213.33
       2.067     0.996094        39824       256.00
       2.077     0.996484        39842       284.44
       2.085     0.996875        39859       320.00
       2.093     0.997266        39873       365.71
       2.101     0.997656        39887       426.67
       2.113     0.998047        39903       512.00
       2.117     0.998242        39910       568.89
       2.127     0.998437        39918       640.00
       2.141     0.998633        39926       731.43
       2.165     0.998828        39935       853.33
       2.179     0.999023        39941      1024.00
       2.189     0.999121        39945      1137.78
       2.231     0.999219        39949      1280.00
       2.375     0.999316        39953      1462.86
       2.937     0.999414        39957      1706.67
       4.355     0.999512        39961      2048.00
       4.951     0.999561        39963      2275.56
       5.119     0.999609        39965      2560.00
       5.347     0.999658        39967      2925.71
       5.687     0.999707        39969      3413.33
       5.739     0.999756        39971      4096.00
       6.011     0.999780        39972      4551.11
       6.187     0.999805        39973      5120.00
      10.247     0.999829        39974      5851.43
      10.263     0.999854        39975      6826.67
      10.511     0.999878        39976      8192.00
      10.511     0.999890        39976      9102.22
      10.551     0.999902        39977     10240.00
      10.551     0.999915        39977     11702.86
      10.591     0.999927        39978     13653.33
      10.591     0.999939        39978     16384.00
      10.591     0.999945        39978     18204.44
      10.663     0.999951        39979     20480.00
      10.663     0.999957        39979     23405.71
      10.663     0.999963        39979     27306.67
      10.663     0.999969        39979     32768.00
      10.663     0.999973        39979     36408.89
      11.407     0.999976        39980     40960.00
      11.407     1.000000        39980          inf
#[Mean    =        1.058, StdDeviation   =        0.446]
#[Max     =       11.400, Total count    =        39980]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  60010 requests in 30.00s, 3.83MB read
Requests/sec:   2000.23
Transfer/sec:    130.87KB

Для каждого из селекторов (0-7)
Обработка http запроса не более 13.25%
Запись в сокет не более 6.37%
Чтение из сокета не более 2.21%
DAO upsert занимает менее 1.1%

Flush теперь асинхронный, поэтому нет резкого возрастания времени обработки запросов, как это было в предыдущем случае.
