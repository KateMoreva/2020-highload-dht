-t10 -c20 -d30s -R2000 -s ./wrk/put.lua --latency http://localhost:8080
Running 30s test @ http://localhost:8080
  10 threads and 20 connections
  Thread calibration: mean lat.: 1.399ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.291ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.568ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.240ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.576ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.215ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.346ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.554ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.575ms, rate sampling interval: 10ms
  Thread calibration: mean lat.: 1.364ms, rate sampling interval: 10ms
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.08ms  428.02us   4.24ms   63.26%
    Req/Sec   213.86     36.56   333.00     87.36%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.11ms
 75.000%    1.36ms
 90.000%    1.65ms
 99.000%    1.95ms
 99.900%    2.12ms
 99.990%    2.88ms
 99.999%    4.25ms
100.000%    4.25ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.051     0.000000            1         1.00
       0.452     0.100000         4017         1.11
       0.649     0.200000         7997         1.25
       0.854     0.300000        11998         1.43
       0.992     0.400000        16017         1.67
       1.105     0.500000        20021         2.00
       1.156     0.550000        21993         2.22
       1.207     0.600000        23989         2.50
       1.254     0.650000        25988         2.86
       1.307     0.700000        28008         3.33
       1.364     0.750000        29986         4.00
       1.397     0.775000        30989         4.44
       1.441     0.800000        31985         5.00
       1.491     0.825000        33009         5.71
       1.545     0.850000        33990         6.67
       1.600     0.875000        35005         8.00
       1.627     0.887500        35497         8.89
       1.653     0.900000        35997        10.00
       1.682     0.912500        36492        11.43
       1.714     0.925000        36989        13.33
       1.745     0.937500        37493        16.00
       1.762     0.943750        37745        17.78
       1.778     0.950000        37989        20.00
       1.797     0.956250        38238        22.86
       1.817     0.962500        38483        26.67
       1.840     0.968750        38737        32.00
       1.851     0.971875        38857        35.56
       1.863     0.975000        38992        40.00
       1.878     0.978125        39110        45.71
       1.895     0.981250        39232        53.33
       1.913     0.984375        39358        64.00
       1.926     0.985938        39419        71.11
       1.936     0.987500        39485        80.00
       1.945     0.989062        39544        91.43
       1.956     0.990625        39608       106.67
       1.970     0.992188        39669       128.00
       1.978     0.992969        39702       142.22
       1.989     0.993750        39732       160.00
       1.999     0.994531        39765       182.86
       2.008     0.995313        39797       213.33
       2.021     0.996094        39824       256.00
       2.026     0.996484        39841       284.44
       2.036     0.996875        39856       320.00
       2.044     0.997266        39871       365.71
       2.057     0.997656        39892       426.67
       2.063     0.998047        39902       512.00
       2.073     0.998242        39911       568.89
       2.083     0.998437        39918       640.00
       2.097     0.998633        39928       731.43
       2.109     0.998828        39935       853.33
       2.115     0.999023        39941      1024.00
       2.125     0.999121        39946      1137.78
       2.131     0.999219        39949      1280.00
       2.147     0.999316        39953      1462.86
       2.173     0.999414        39957      1706.67
       2.219     0.999512        39961      2048.00
       2.229     0.999561        39963      2275.56
       2.235     0.999609        39965      2560.00
       2.241     0.999658        39967      2925.71
       2.385     0.999707        39969      3413.33
       2.601     0.999756        39971      4096.00
       2.609     0.999780        39972      4551.11
       2.677     0.999805        39973      5120.00
       2.731     0.999829        39974      5851.43
       2.797     0.999854        39975      6826.67
       2.883     0.999878        39976      8192.00
       2.883     0.999890        39976      9102.22
       3.237     0.999902        39977     10240.00
       3.237     0.999915        39977     11702.86
       3.283     0.999927        39978     13653.33
       3.283     0.999939        39978     16384.00
       3.283     0.999945        39978     18204.44
       3.387     0.999951        39979     20480.00
       3.387     0.999957        39979     23405.71
       3.387     0.999963        39979     27306.67
       3.387     0.999969        39979     32768.00
       3.387     0.999973        39979     36408.89
       4.247     0.999976        39980     40960.00
       4.247     1.000000        39980          inf
#[Mean    =        1.076, StdDeviation   =        0.428]
#[Max     =        4.244, Total count    =        39980]
#[Buckets =           27, SubBuckets     =         2048]
----------------------------------------------------------
  60010 requests in 30.00s, 3.83MB read
Requests/sec:   2000.21
Transfer/sec:    130.87KB

Для каждого из селекторов (0-7)
Http буфер занимает не более 24.89%
Обработчик не более 13.92%
Отправка Response не более 2.95%
DAO.upsert не более 3.38%

Flush теперь асинхронный, поэтому нет резкого возрастания времени обработки запросов, как это былов предыдущем случае.
